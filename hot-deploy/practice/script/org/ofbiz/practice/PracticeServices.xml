<?xml version="1.0" encoding="UTF-8"?>
<simple-methods xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/simple-methods-v2.xsd">
    <simple-method method-name="">
    	
    </simple-method>
    <!-- ExampleStatus methods -->
    <simple-method method-name="createExampleStatus" short-description="create a ExampleItem">
        <now-timestamp field="nowTimestamp"/>

        <!-- find the most recent status record and set the statusEndDate -->
        <entity-and entity-name="ExampleStatus" list="oldExampleStatusList">
            <field-map field-name="exampleId" from-field="parameters.exampleId"/>
            <order-by field-name="-statusDate"/>
        </entity-and>
        <first-from-list entry="oldExampleStatus" list="oldExampleStatusList"/>
        <if-not-empty field="oldExampleStatus">
            <set field="oldExampleStatus.statusEndDate" from-field="nowTimestamp"/>
            <store-value value-field="oldExampleStatus"/>
        </if-not-empty>

        <make-value entity-name="ExampleStatus" value-field="newEntity"/>
        <set-pk-fields map="parameters" value-field="newEntity"/>
        <set-nonpk-fields map="parameters" value-field="newEntity"/>
        <set field="newEntity.statusDate" from-field="nowTimestamp"/>
        <create-value value-field="newEntity"/>
    </simple-method>

    
</simple-methods>